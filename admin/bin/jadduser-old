#!/usr/bin/env bash

file="$HOME/users/jusers.txt"
while IFS=: read -r f1 f2
do
        printf 'uid: %s, user: %s\n' "$f1" "$f2"
		useradd $f2 --uid $f1 --password niHYAA5jMRuFg \   # Password = turing
			--create-home --shell /bin/bash
		usermod -a -G jupyhub $1
		cp -r $HOME/users/skel/. /home/$f2
		chown -R $f2:$f2 /home/$f2
done <"$file"
	

# deluser --remove-all-files user &> /dev/null


# Ã€ COPIER DANS /etc/sudoers :

# the command(s) the Hub can run on behalf of the above users without needing a password
# the exact path may differ, depending on how sudospawner was installed
# Cmnd_Alias JUPYTER_CMD = /usr/local/bin/sudospawner

# actually give the Hub user permission to run the above command on behalf
# of the above users without prompting for a password
# jupyhub ALL=(%jupyhub) NOPASSWD:JUPYTER_CMD
